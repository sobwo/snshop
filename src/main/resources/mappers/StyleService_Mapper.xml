<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.myteam.myapp.persistance.StyleService_Mapper">


<select id="boardSelectAll" parameterType="int" resultType="bv">
<!--  게시물가져오기 select * from board a join member b on a.memberNo = b.memberNo where a.memberNo in (select followingMemberNo from following where memberNo = #{memberNo}) --> 
	 <!-- 문제 있음 되는게있고 안되는게있음 select * from board a join member b on a.memberNo = b.memberNo join likes c on a. boardNo = c.boardNo where a. memberNo in (select followingMemberNo from following where memberNo =#{memberNo}) 	 -->

<!-- SELECT a.*, b.*, c.like_check FROM board
 a JOIN member b ON a.memberNo = b.memberNo
LEFT JOIN likes c ON a.boardNo =
 c.boardNo AND c.memberNo = #{memberNo}
WHERE a.memberNo IN (SELECT followingMemberNo FROM following WHERE memberNo = #{memberNo})  모르겠음 되긴하는데...-->

SELECT a.*, b.*, c.like_check
FROM board a
JOIN member b ON a.memberNo = b.memberNo
LEFT JOIN likes c ON a.boardNo = c.boardNo AND c.memberNo = #{memberNo}
WHERE a.memberNo IN (
    SELECT followingMemberNo
    FROM following
    WHERE memberNo = #{memberNo}
)
AND a.delYn = 'N'

<!-- select a.*,b.*,c.like_check from board a join member b on a. memberNo = b.memberNo
left join likes c on a.boardNo = c.boardNo and c.memberNo = #{memberNo}
where a.memberNo in (select followingMemberNo from following where memberNo =#{memberNo}) -->

<!-- SELECT a.*, b.*, c.like_check
FROM board a
JOIN member b ON a.memberNo = b.memberNo
LEFT JOIN likes c ON a.boardNo = c.boardNo
WHERE a.memberNo IN (SELECT followingMemberNo FROM following WHERE memberNo = #{memberNo})
  AND c.memberNo = #{memberNo}

	이상함	 -->										
</select>
<!-- <select id="getcomment" parameterType="Integer" resultType="Integer"> -->
<!-- 	select like_check from likes where memberNo = #{0} and boardNo = #{1}  -->
<!-- </select> -->


<select id="boardTotalList" resultType="ld">
	SELECT a.*, IFNULL(b.like_check, 0) AS like_check, m.memberId FROM board a LEFT JOIN likes b ON a.boardNo = b.boardNo AND b.memberNo = #{memberNo} LEFT JOIN member m ON a.memberNo = m.memberNo WHERE a.delYn = 'N' ORDER BY a.likeCnt DESC, a.boardNo DESC
</select>

<select id="boardTotalList_newest" resultType="ld">
	SELECT a.*, IFNULL(b.like_check, 0) AS like_check,  m.memberId FROM board a LEFT JOIN likes b ON a.boardNo = b.boardNo AND b.memberNo = #{memberNo} LEFT JOIN member m ON a.memberNo = m.memberNo WHERE a.delYn = 'N' ORDER BY a.boardNo DESC
</select>

<!-- <select id="" -->
<!-- 
<select id="likesList" parameterType="lv" resultType="int">
	select count(*) from likes where boardNo=#{boardNo} and memberNo=#{memberNo}
</select>
-->




</mapper>